<script>
	function dotoggle(a) {
	  $(a).slideToggle('slow');
	}
  function doreplace(a) {
   $("li.sectionItem").addClass("section_open");
	}
</script>
<%if @page%>
   <%contents = @page.root.children%>
<%else%>
   <%contents = []%>
<%end%>
<ul class='sectionContentsList'>
  <%for item in contents%>
    <%if item.children.size > 0%>
      <%contents = item.children%>

      <li id="list_item_<%=item.id%>" class='sectionItem'>
        <a href='javascript:void(0);' onclick="dotoggle('ul#item_<%=item.id%>'); doreplace('li#list_item_<%=item.id%>');"><%=item.title%></a>
      </li>
      <ul id='item_<%=item.id%>' class='submenuitems' style='display: none'>
        <%contents.each do |subitem|%>
  		      <li class='subitem'>
	  		      <%=link_to subitem, :id=>subitem.id%>
		  		  </li>
        <%end%>
      </ul>
    <%else%>
      <li class='pageItem'>
        <%=link_to item, :id=>item.id%>
      </li>
    <%end%>
  <%end%>
</ul>

<br/>
